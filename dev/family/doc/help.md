# 谭氏家谱电子系统说明文档

## 宗旨

咱们澄江谭氏有源远流长的家谱（族谱）传统，这对追念先人，团结后辈都有着重大意义
。随着社会文明、科学技术的发展，我们有必要利用当作信息技术对家庭进行再整理与再
传承。因此我暂以个人学识、技术做了这个家谱系统网页版，以期于在互联网上随时查看
家族历代成员。而且移动互联网的普及，人手一部手机，也可以随时随地上网，也就可以
访问该家谱系统。

家谱系统的初期使用是倡导族人各分支录入姓名与传承关系等信息，希望各族人踊跃支持
。本系统也尚在开发初期，不断优化完善中。目前的网页版在桌面电脑（以及笔记本）上
的浏览器有更良好的表现，若在手机浏览器上发现文字、表格拥挤，可尝试横屏。

## 功能介绍

本节介绍的功能大部分完成，如有部分细节功能未完成会单独指出。

目前家谱系统主要设计了两个功能页签，实现了对家庭成员信息的浏览与修改、增加等基
础功能。

* 家谱纵览：按表格化列出所有成员的基本信息，数据过多时再分页；
* 个人详情：以某个成员的视角列出与他（她）相关的信息；
* 帮助中心：收集类似本文文字的说明文档，作为了解与使用本系统的参考。

在网页上方导航菜单中，点击即切换至相应的页面中。

### 家谱纵览与概念说明

在家谱纵览表中列出如下表头的信息，这也基本反映了系统在服务器数据库保存的信息。

* 编号：也就是数据库保存信息的唯一 id ；
* 姓名：在一般使用层面上，用姓名来表示一行信息更直观，但姓名不保证唯一；
* 性别：易理解，本系统与传统族谱的一个区别在于同时收录男女后代；
* 辈份：系统内部用递增数字表示的辈份，当前收录的最早祖先为第 1 代；
* 父亲：在系统数据库中保存为关联的编号 id ，网页上转为姓名表现；
* 配偶：配偶也是存编号转姓名表现；
* 生日、忌日：分别表示出生年月日与过世的年月日。

不一定每条成员记录都有以上所有信息。但是对于新增成员，最少应该有姓名、性别与父
亲，编号由系统自动分配，代际（辈份）也由父亲关系计算而得。其他信息资料可延后补齐。

在家谱纵览表中，按代际辈份排序。（对于同辈份的，可选策略是按生日排序，只是目前
信息普遍缺少生日信息，暂时按系统入库顺序）只列出主要信息，更多信息将在个人详情
页列出。

家谱只收录父系后代，可收录女儿，但不收录外嫁女儿的后代。可记录配偶的姓名，但系
统不为配偶增加额外记录。

### 个人详情页面说明

个人详情页针对某个家族成员，尽可能列出相关的信息，比如：

* 追溯先人：自己从哪里来，从父（母）一直上溯到系统收录的祖先；
* 延续后代：自己生了哪些子女后代；
* 兄弟姐妹：列出自己的同胞兄弟；
* 生辰年方：如果将生日（忌日）录入系统，则列出到现在的岁数（或寿数）；
* 婚配夫妻：列出另一半的姓名。

然后还可以为每个成员提供一则 300 字以内的生平简介。

个人详情页也放置一个与家谱纵览相同结构的表格，但是精简化，只列出与自己相关的数
据行。在中间列出自己与配偶的行，往上列出先人的数据行，往下列出后代的行。

最后，在这个页面下可以修改资料或增加录入子女后代的信息。

在个人详情页由于需呈现段落较多，大量采用于折叠的方式。凡右向箭头►表示被折叠，
点击后会展开段落，变成向下箭头▼，可反复切换展开或隐藏。

在家谱纵览表中的所有人名都是可点击的超链接，点击后会跳转到相应人名的个人详情页
。在个人详情页中所列的有关系人名中，也是可点击超链接，链到其他人的详情页面。

如果不是通过人名链接，而是直接通过导航菜单进入个人详情页，则默认是查询最早先祖
的详情页面。但是如果登陆后，则按登陆名作为默认详情页。

## 登陆系统

如果只是浏览查看家谱成员信息，登陆不是必须的。

但是登陆主要有两个好处，一是快速查看自己的详情信息，二是可以修改资料。登陆后有
以下几种修改权限：

* 修改自己的资料；
* 修改父母的资料；
* 增加与修改子女的资料。

也就是说，以登陆名为视角，赋予三代的修改权限。如果要修改更早的祖先或更后的后代
的资料，请换名登陆后再修改。旁系配偶只能修改自己的资料，若要修改子女资料，换用
直系成员登陆。

凡是入库的成员，都可以按姓名登陆。但是如果存在重名，只能用编号登陆。
初始登陆密码与操作密码都和编号 id 相同。但可在个人详情页末修改密码。

快捷登陆与换名登陆，凡点击表格内的 id 链接，将展开登陆表单，自动将被点 id 填充
至登陆名，然后只要输入密码即可。

## 资料修改

修改资料的表单放在个人详情页下方，因为修改资料也是参照某个成员而言的。有两个操
作选项：

* 修改资料：修改自己的资料；
* 增加子女：录入子女的信息。

可编辑表单项与表格字段一一对应，根据选择的操作，会自动完成一些表单项的填写。比
如在修改资料时，固定了必填的编号，然后只要修改缺失的或可修改项，不需要修改的不
动按原样或留空即可。确认无误后点“提交操作”即可。

在父亲输入框，可以填父亲的编号或姓名，这就要求父亲已经入库，且不存在重名时才可
以填姓名，否则按编号填写。一个常见的提醒是，不能企图在自己详情页面中修改父亲的
姓名，那无法通过父亲的“错误”姓名找到相应的编号。那只能在父亲的详情页面中修改
他的姓名。

一般情况下，在个人详情页时增加子女操作时会自动将填写父亲信息。如果按顺序录入子
女或能提供生日信息，则也没必要填充“兄弟长序”信息。只有姓名与性别是必填的，同
一父亲下的子女应该不会重名，系统以此为据防止重复录入。

一些自动填充的输入域被锁定，如果确实要修改，可点击前面的标签文字，重新激活为可
修改状态。

由于系统以编号作为唯一标记，成员的姓名是可以修改的。每个成员可以有多个曾用名，
大名、小名或乳名之类的。在系统数据库中只能录一个名字。建议对于已故的先人，录入
族谱中的大名。而当代活跃的成员，可录常用名，以便同辈识别认取。多个曾用名有必要
记录时在生平简介中补充。

原则上不允许删除数据记录，尽量通过修改资料维护到正确状态。确实是比如重复录入增
加的子女资料，可以将姓名改为 '0' 来标记废弃。标记废弃的数据不会被选出来呈现在
该系统界面上。

最后，在作任何修改操作时，为安全起见，除了要求登陆，还要求提供一个操作密码。初
始也与登陆密码一样各编号等同，但可修改。
